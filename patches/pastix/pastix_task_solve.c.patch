--- sopalin/pastix_task_solve.c.orig	2024-03-23 20:57:17.677339000 +0100
+++ sopalin/pastix_task_solve.c	2024-03-23 21:00:41.453737000 +0100
@@ -34,7 +34,9 @@
 #endif
 #include "parsec/utils/zone_malloc.h"
 
+#if defined(PASTIX_WITH_CUDA)
 gpu_device_t* gpu_device = NULL;
+#endif
 char* gpu_base = NULL;
 
 #if defined(PASTIX_DEBUG_SOLVE)
@@ -243,8 +245,10 @@
     }
 
     sopalin_data.solvmtx = pastix_data->solvmatr;
+#if defined(PASTIX_WITH_CUDA)
     sopalin_data.cublas_handle = pastix_data->cublas_handle;
     sopalin_data.cublas_stat = pastix_data->cublas_stat;
+#endif
 
     switch (flttype) {
     case PastixComplex64:
@@ -328,8 +332,10 @@
     }
 
     sopalin_data.solvmtx = pastix_data->solvmatr;
+#if defined(PASTIX_WITH_CUDA)
     sopalin_data.cublas_handle = pastix_data->cublas_handle;
     sopalin_data.cublas_stat = pastix_data->cublas_stat;
+#endif
 
     switch (flttype) {
     case PastixComplex64:
@@ -528,7 +534,7 @@
                    pastix_int_t nrhs, void *b, pastix_int_t ldb )
 {
     pastix_bcsc_t *bcsc;
-	pastix_int_t i;
+	// pastix_int_t i;
 
     /*
      * Check parameters
